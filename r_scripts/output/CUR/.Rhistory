f <- function(x){}
print(2)
f(10)
f <- function(x){}
f <- function(x){
y = x + 10
x + y
}
f
f(x)
f(5)
set.seed(1)
x <- rnorm(100, 15, 2)
y <- 2.5 * x + rnorm(100, 0, 1.5)
lm(x~ y)
plot(x, y)
model = lm(x ~ y)
abline(model)
plot(x, y)
abline(model)
model = lm(y ~ x)
model
abline(model)
plot(a)
lm(Cool ~ Name + Person)
lm(Cool ~ Name + Person, a)
abline(Cool)
print("{hello")
print("cool Person")
install.packages("languageserver")
print("Cool Person")
lm(c(1,2,3) ~ c(2,3,4))
install.packages("yaml")
library(yaml)
cwd <- getwd()
parameters = yaml.load_file(paste0(cwd, "/config.yml"))
cwd <- setwd("C:\\Users\\USLP095001\\code\\pytstops\\pySTOPS\\r_scripts")
parameters = yaml.load_file(paste0(cwd, "/config.yml"))
# use gsub to comply with windows paths, just make it
input_dir <- gsub("\\\\", "/", parameters["input_dir"])
output_dir <- gsub("\\\\", "/", parameters["output_dir"])
parameters = yaml.load_file(paste0(cwd, "/config.yml"))
cwd <- setwd("C:\\Users\\USLP095001\\code\\pytstops\\pySTOPS\\r_scripts")
setwd("C:\\Users\\USLP095001\\code\\pytstops\\pySTOPS\\r_scripts")
cwd <- getwd()
parameters = yaml.load_file(paste0(cwd, "/config.yml"))
# use gsub to comply with windows paths, just make it
input_dir <- gsub("\\\\", "/", parameters["input_dir"])
output_dir <- gsub("\\\\", "/", parameters["output_dir"])
tables <- parameters["tables_to_output"][[1]]
read_prn_path = paste0(cwd, "/STOPS.R")
source(read_prn_path)
summary_calculations_path = paste0(cwd, "/STOPS_Calculations.r")
source(summary_calculations_path)
output_dir
setwd("C:\\Users\\USLP095001\\code\\pytstops\\pySTOPS\\extract_table")
cwd <- getwd()
parameters = yaml.load_file(paste0(cwd, "/config.yml"))
# use gsub to comply with windows paths, just make it
input_dir <- gsub("\\\\", "/", parameters["input_dir"])
output_dir <- gsub("\\\\", "/", parameters["output_dir"])
tables <- parameters["tables_to_output"][[1]]
read_prn_path = paste0(cwd, "/STOPS.R")
source(read_prn_path)
# process_table_path = paste0(cwd, "/STOPS_run.r")
# source(process_table_path)
output_dir
setwd("C:\\Users\\USLP095001\\code\\pytstops\\pySTOPS\\r_scripts")
cwd <- getwd()
parameters = yaml.load_file(paste0(cwd, "/config.yml"))
# use gsub to comply with windows paths, just make it
input_dir <- gsub("\\\\", "/", parameters["input_dir"])
output_dir <- gsub("\\\\", "/", parameters["output_dir"])
# process_table_path = paste0(cwd, "/STOPS_run.r")
# source(process_table_path)
input_dir
output_dir
output_dir
output_dir = "C:/Users/USLP095001/code/pytstops/pySTOPS/r_scripts/output_2"
summary_calculations_path = paste0(cwd, "/STOPS_Calculations.r")
source(summary_calculations_path)
Year <- c("CUR/","FUT/")
Scenario <- c(rep(c("HBW",
"All Other Purposes",
"Special Market 1",
"Special Market 1",
"Special Market 1",
"Special Market 1"
), each = 2), "New Transit Trips",
"Linked Transit TOP", " ", "PMT Difference", "VMT Difference")
rep <- (length(Scenario)-5)/2
Transit_Type <- c(rep(c("Non-Transit Dependents", "Transit Dependents"),times= rep), rep(c("-"),times= 5))
Summary_Table <- data.frame("Scenario" = Scenario,"Transit Type" = Transit_Type)
for (s in Year){
mainDir <- paste(output_dir, s, sep="/")
print(mainDir)
setwd(mainDir)
table_nos <- c("10.03", "10.04", "1021.03", "4.02", "4.03", "706.03", "769.03", "8.01", "958.03")
table <- list()
rows <- list()
cols <- list()
last_value <- list()
for (i in 1:length(table_nos))
{
name <- paste("Table ", table_nos[i], ".csv", sep = "")
t <- read.csv(name)
r <- nrow(t)
c <- ncol(t)
for (k in 1:r)
{
if(t[k,1] == "Total")
{
last_row <- k
}
}
m = t[last_row, c]
table <- c(table, t)
rows <- c(rows, r)
cols <- c(cols, c)
last_value <- c(last_value, as.integer(m))
}
names(last_value) <- table_nos
HBW_NTD = last_value$`769.03`-last_value$`706.03`
HBW_TD = last_value$`706.03`
AOP_TD =last_value$`958.03`- HBW_TD
AOP_NTD = last_value$`1021.03`- HBW_TD - HBW_NTD - AOP_TD
SM1_NTD = 0
SM1_TD = 0
SM2_NTD = 0
SM2_TD = 0
SM3_NTD = 0
SM3_TD = 0
SM4_NTD = 0
SM4_TD = 0
NTT= last_value$`4.02`
LTTOP = last_value$`4.03`
PMT_Diff = last_value$`8.01`
VMT_Diff = last_value$`8.01`/1.1
values <- c(HBW_NTD,HBW_TD, AOP_NTD, AOP_TD,SM1_NTD,SM1_TD,SM2_NTD, SM2_TD, SM3_NTD,SM3_TD,SM4_NTD, SM4_TD, NTT,LTTOP,0, PMT_Diff, VMT_Diff)
# Vehicle Assignment
Peak <- read.csv("Table 10.03.csv")
Off_Peak <- read.csv("Table 10.04.csv")
r <- nrow(Peak)
c <- ncol(Peak)
for (k in 1:r)
{
if(Peak[k,1] == "Route_ID")
{start_line <- k+1}
else if(Peak[k,1] == "Total")
{end_line <-k}
}
g <- Peak[c(start_line : end_line), 1]
VehAsg <- data.frame("Route_ID" = Peak[c(start_line : end_line), 1],
"Route Name" = Peak[c(start_line : end_line), 2],
"No_Build_PEAK" = Peak[c(start_line : end_line), 7],
"No_Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 7],
"Build_PEAK" = Peak[c(start_line : end_line), 10],
"Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 10])
#Create Data frames
if(s == "CUR/")
{ Summary_Table <- data.frame(Summary_Table, "Current" = values)
# mainDir <- "C:/projects/30901990A_sorta/fta_temp/r56_r57_2019_reading/"
setwd(output_dir)
write.csv(VehAsg, "Vehicle Assignment (CUR).csv", na = "", row.names = FALSE, col.names = FALSE)
}
else if(s == "FUT/")
{Summary_Table <- data.frame(Summary_Table, "Future" = values)
# mainDir <- "C:/projects/30901990A_sorta/fta_temp/r56_r57_2019_reading/"
setwd(output_dir)
write.csv(VehAsg, "Vehicle Assignment (FUT).csv", na = "", row.names = FALSE, col.names = FALSE)
}
}
mainDir <- paste(output_dir, s, sep="/")
print(mainDir)
setwd(mainDir)
table_nos <- c("10.03", "10.04", "1021.03", "4.02", "4.03", "706.03", "769.03", "8.01", "958.03")
table <- list()
rows <- list()
cols <- list()
last_value <- list()
for (i in 1:length(table_nos))
{
name <- paste("Table ", table_nos[i], ".csv", sep = "")
t <- read.csv(name)
r <- nrow(t)
c <- ncol(t)
for (k in 1:r)
{
if(t[k,1] == "Total")
{
last_row <- k
}
}
m = t[last_row, c]
table <- c(table, t)
rows <- c(rows, r)
cols <- c(cols, c)
last_value <- c(last_value, as.integer(m))
}
names(last_value) <- table_nos
HBW_NTD = last_value$`769.03`-last_value$`706.03`
HBW_TD = last_value$`706.03`
AOP_TD =last_value$`958.03`- HBW_TD
AOP_NTD = last_value$`1021.03`- HBW_TD - HBW_NTD - AOP_TD
SM1_NTD = 0
SM1_TD = 0
SM2_NTD = 0
SM2_TD = 0
SM3_NTD = 0
SM3_TD = 0
SM4_NTD = 0
SM4_TD = 0
NTT= last_value$`4.02`
LTTOP = last_value$`4.03`
PMT_Diff = last_value$`8.01`
VMT_Diff = last_value$`8.01`/1.1
values <- c(HBW_NTD,HBW_TD, AOP_NTD, AOP_TD,SM1_NTD,SM1_TD,SM2_NTD, SM2_TD, SM3_NTD,SM3_TD,SM4_NTD, SM4_TD, NTT,LTTOP,0, PMT_Diff, VMT_Diff)
# Vehicle Assignment
Peak <- read.csv("Table 10.03.csv")
Off_Peak <- read.csv("Table 10.04.csv")
r <- nrow(Peak)
c <- ncol(Peak)
for (k in 1:r)
{
if(Peak[k,1] == "Route_ID")
{start_line <- k+1}
else if(Peak[k,1] == "Total")
{end_line <-k}
}
g <- Peak[c(start_line : end_line), 1]
VehAsg <- data.frame("Route_ID" = Peak[c(start_line : end_line), 1],
"Route Name" = Peak[c(start_line : end_line), 2],
"No_Build_PEAK" = Peak[c(start_line : end_line), 7],
"No_Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 7],
"Build_PEAK" = Peak[c(start_line : end_line), 10],
"Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 10])
g
data.frame
for (k in 1:r)
{
if(Peak[k,1] == "Route_ID")
{start_line <- k+1}
else if(Peak[k,1] == "Total")
{end_line <-k}
}
g <- Peak[c(start_line : end_line), 1]
#Create Data frames
if(s == "CUR/")
{ Summary_Table <- data.frame(Summary_Table, "Current" = values)
# mainDir <- "C:/projects/30901990A_sorta/fta_temp/r56_r57_2019_reading/"
setwd(output_dir)
write.csv(VehAsg, "Vehicle Assignment (CUR).csv", na = "", row.names = FALSE, col.names = FALSE)
}
else if(s == "FUT/")
{Summary_Table <- data.frame(Summary_Table, "Future" = values)
# mainDir <- "C:/projects/30901990A_sorta/fta_temp/r56_r57_2019_reading/"
setwd(output_dir)
write.csv(VehAsg, "Vehicle Assignment (FUT).csv", na = "", row.names = FALSE, col.names = FALSE)
}
for (s in Year){
mainDir <- paste(output_dir, s, sep="/")
print(mainDir)
setwd(mainDir)
table_nos <- c("10.03", "10.04", "1021.03", "4.02", "4.03", "706.03", "769.03", "8.01", "958.03")
table <- list()
rows <- list()
cols <- list()
last_value <- list()
for (i in 1:length(table_nos))
{
name <- paste("Table ", table_nos[i], ".csv", sep = "")
t <- read.csv(name)
r <- nrow(t)
c <- ncol(t)
for (k in 1:r)
{
if(t[k,1] == "Total")
{
last_row <- k
}
}
m = t[last_row, c]
table <- c(table, t)
rows <- c(rows, r)
cols <- c(cols, c)
last_value <- c(last_value, as.integer(m))
}
names(last_value) <- table_nos
HBW_NTD = last_value$`769.03`-last_value$`706.03`
HBW_TD = last_value$`706.03`
AOP_TD =last_value$`958.03`- HBW_TD
AOP_NTD = last_value$`1021.03`- HBW_TD - HBW_NTD - AOP_TD
SM1_NTD = 0
SM1_TD = 0
SM2_NTD = 0
SM2_TD = 0
SM3_NTD = 0
SM3_TD = 0
SM4_NTD = 0
SM4_TD = 0
NTT= last_value$`4.02`
LTTOP = last_value$`4.03`
PMT_Diff = last_value$`8.01`
VMT_Diff = last_value$`8.01`/1.1
values <- c(HBW_NTD,HBW_TD, AOP_NTD, AOP_TD,SM1_NTD,SM1_TD,SM2_NTD, SM2_TD, SM3_NTD,SM3_TD,SM4_NTD, SM4_TD, NTT,LTTOP,0, PMT_Diff, VMT_Diff)
# Vehicle Assignment
Peak <- read.csv("Table 10.03.csv")
Off_Peak <- read.csv("Table 10.04.csv")
r <- nrow(Peak)
c <- ncol(Peak)
for (k in 1:r)
{
if(Peak[k,1] == "Route_ID")
{start_line <- k+1}
else if(Peak[k,1] == "Total")
{end_line <-k}
}
g <- Peak[c(start_line : end_line), 1]
VehAsg <- data.frame("Route_ID" = Peak[c(start_line : end_line), 1],
"Route Name" = Peak[c(start_line : end_line), 2],
"No_Build_PEAK" = Peak[c(start_line : end_line), 7],
"No_Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 7],
"Build_PEAK" = Peak[c(start_line : end_line), 10],
"Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 10])
#Create Data frames
if(s == "CUR/")
{ Summary_Table <- data.frame(Summary_Table, "Current" = values)
# mainDir <- "C:/projects/30901990A_sorta/fta_temp/r56_r57_2019_reading/"
setwd(output_dir)
write.csv(VehAsg, "Vehicle Assignment (CUR).csv", na = "", row.names = FALSE, col.names = FALSE)
}
else if(s == "FUT/")
{Summary_Table <- data.frame(Summary_Table, "Future" = values)
# mainDir <- "C:/projects/30901990A_sorta/fta_temp/r56_r57_2019_reading/"
setwd(output_dir)
write.csv(VehAsg, "Vehicle Assignment (FUT).csv", na = "", row.names = FALSE, col.names = FALSE)
}
}
VehAsg <- data.frame("Route_ID" = Peak[c(start_line : end_line), 1],
"Route Name" = Peak[c(start_line : end_line), 2],
"No_Build_PEAK" = Peak[c(start_line : end_line), 7],
"No_Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 7],
"Build_PEAK" = Peak[c(start_line : end_line), 10],
"Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 10])
g <- Peak[c(start_line : end_line), 1]
g
VehAsg <- data.frame("Route_ID" = Peak[c(start_line : end_line), 1],
"Route Name" = Peak[c(start_line : end_line), 2],
"No_Build_PEAK" = Peak[c(start_line : end_line), 7],
"No_Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 7],
"Build_PEAK" = Peak[c(start_line : end_line), 10],
"Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 10])
data
data.frame
Peak[c(start_line : end_line)
asd
Peak[c(start_line : end_line), 1]
Peak[c(start_line : end_line), 2]
Peak[c(start_line : end_line), 7]
for (k in 1:r)
{
print(k)
if(Peak[k,1] == "Route_ID")
{start_line <- k+1}
else if(Peak[k,1] == "Total")
{end_line <-k}
}
r
for (s in Year){
mainDir <- paste(output_dir, s, sep="/")
print(mainDir)
setwd(mainDir)
table_nos <- c("10.03", "10.04", "1021.03", "4.02", "4.03", "706.03", "769.03", "8.01", "958.03")
table <- list()
rows <- list()
cols <- list()
last_value <- list()
for (i in 1:length(table_nos))
{
name <- paste("Table ", table_nos[i], ".csv", sep = "")
t <- read.csv(name)
r <- nrow(t)
c <- ncol(t)
for (k in 1:r)
{
if(t[k,1] == "Total")
{
last_row <- k
}
}
m = t[last_row, c]
table <- c(table, t)
rows <- c(rows, r)
cols <- c(cols, c)
last_value <- c(last_value, as.integer(m))
}
names(last_value) <- table_nos
HBW_NTD = last_value$`769.03`-last_value$`706.03`
HBW_TD = last_value$`706.03`
AOP_TD =last_value$`958.03`- HBW_TD
AOP_NTD = last_value$`1021.03`- HBW_TD - HBW_NTD - AOP_TD
SM1_NTD = 0
SM1_TD = 0
SM2_NTD = 0
SM2_TD = 0
SM3_NTD = 0
SM3_TD = 0
SM4_NTD = 0
SM4_TD = 0
NTT= last_value$`4.02`
LTTOP = last_value$`4.03`
PMT_Diff = last_value$`8.01`
VMT_Diff = last_value$`8.01`/1.1
values <- c(HBW_NTD,HBW_TD, AOP_NTD, AOP_TD,SM1_NTD,SM1_TD,SM2_NTD, SM2_TD, SM3_NTD,SM3_TD,SM4_NTD, SM4_TD, NTT,LTTOP,0, PMT_Diff, VMT_Diff)
# Vehicle Assignment
Peak <- read.csv("Table 10.03.csv")
Off_Peak <- read.csv("Table 10.04.csv")
r <- nrow(Peak)
c <- ncol(Peak)
for (k in 1:r)
{
if(Peak[k,1] == "Route_ID")
{start_line <- k+1}
else if(Peak[k,1] == "Total")
{end_line <-k}
}
g <- Peak[c(start_line : end_line), 1]
VehAsg <- data.frame("Route_ID" = Peak[c(start_line : end_line), 1],
"Route Name" = Peak[c(start_line : end_line), 2],
"No_Build_PEAK" = Peak[c(start_line : end_line), 7],
"No_Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 7],
"Build_PEAK" = Peak[c(start_line : end_line), 10],
"Build_OFF PEAK" = Off_Peak[c(start_line : end_line), 10])
#Create Data frames
if(s == "CUR/")
{ Summary_Table <- data.frame(Summary_Table, "Current" = values)
# mainDir <- "C:/projects/30901990A_sorta/fta_temp/r56_r57_2019_reading/"
setwd(output_dir)
write.csv(VehAsg, "Vehicle Assignment (CUR).csv", na = "", row.names = FALSE, col.names = FALSE)
}
else if(s == "FUT/")
{Summary_Table <- data.frame(Summary_Table, "Future" = values)
# mainDir <- "C:/projects/30901990A_sorta/fta_temp/r56_r57_2019_reading/"
setwd(output_dir)
write.csv(VehAsg, "Vehicle Assignment (FUT).csv", na = "", row.names = FALSE, col.names = FALSE)
}
}
mainDir <- paste(output_dir, s, sep="/")
print(mainDir)
setwd(mainDir)
table_nos <- c("10.03", "10.04", "1021.03", "4.02", "4.03", "706.03", "769.03", "8.01", "958.03")
table <- list()
rows <- list()
cols <- list()
last_value <- list()
name <- paste("Table ", table_nos[i], ".csv", sep = "")
i
t
table_nos[i]
table_nos[2]
table_nos[0]
for (k in 1:r)
{
if(t[k,1] == "Total")
{
last_row <- k
}
}
k
r
for (k in 1:r)
{
if(t[k,1] == "Total")
{
last_row <- k
}
}
last_value <- list()
for (i in 1:length(table_nos))
{
name <- paste("Table ", table_nos[i], ".csv", sep = "")
t <- read.csv(name)
r <- nrow(t)
c <- ncol(t)
for (k in 1:r)
{
if(t[k,1] == "Total")
{
last_row <- k
}
}
m = t[last_row, c]
table <- c(table, t)
rows <- c(rows, r)
cols <- c(cols, c)
last_value <- c(last_value, as.integer(m))
}
table_nos
names
names
names(last_value)
last_value
last_value$`769.03`
last_value$`706.03`
last_value$`769.03`-
last_value$`769.03
last_value$`769.03
last_value$`769.03`
Summary_Table
Summary_Table <- data.frame("Scenario" = Scenario,"Transit Type" = Transit_Type)
Summary_Table <- data.frame("Scenario" = Scenario,"Transit Type" = Transit_Type)
Summary_Table
